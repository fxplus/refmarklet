<!DOCTYPE html>
<html>
  <head>
    <title>refMarklet | demo</title>
  </head>
  <body>
    <article>
      <h1>refMarklet</h1>
      <p>Drag the following link to your bookmark bar to use:</p>
      <p><a href="javascript:(function(e,a,g,h,f,c,b,d){if(!(f=e.jQuery)||g&gt;f.fn.jquery||h(f)){c=a.createElement(&quot;script&quot;);c.type=&quot;text/javascript&quot;;c.src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/&quot;+g+&quot;/jquery.min.js&quot;;c.onload=c.onreadystatechange=function(){if(!b&amp;&amp;(!(d=this.readyState)||d==&quot;loaded&quot;||d==&quot;complete&quot;)){h((f=e.jQuery).noConflict(1),b=1);f(c).remove()}};a.documentElement.childNodes[0].appendChild(c)}})(window,document,&quot;1.3.2&quot;,function($,L){var syntaxElements={auth:&quot;author&quot;,pub:&quot;publisher&quot;,date:&quot;date&quot;,title:&quot;title&quot;};var options=&quot;&quot;;$.each(syntaxElements,function(a,b){options+='&lt;option value=&quot;'+b+'&quot;&gt;'+b+&quot;&lt;/option&gt;&quot;});var checkbox='&lt;input type=&quot;checkbox&quot; name=&quot;vehicle&quot; value=&quot;Bike&quot; id=&quot;refkeyedit&quot;&gt;edit reference highlights&lt;br&gt;';var widget='&lt;br/&gt;&lt;div id=&quot;refwidget&quot; class=&quot;pull-right span4&quot;&gt;&lt;label&gt;Referencing Markup Widget&lt;/label&gt;&lt;select id=&quot;refel&quot;&gt;'+options+'&lt;/select&gt;&lt;input type=&quot;text&quot; name=&quot;elabel&quot; id=&quot;elabel&quot;&gt;'+checkbox+&quot;&lt;/div&gt;&quot;;$(&quot;#edit-body&quot;).before(widget);var refeditable=false;$(&quot;#refkeyedit&quot;).change(function(){refeditable=!refeditable});var element=&quot;author&quot;;var elabel=&quot;&quot;;$(&quot;textarea&quot;).mouseup(function(){mouseDown=false;if(refeditable){var c=$(this)[0].selectionStart;var a=$(this)[0].selectionEnd;element=$(&quot;#refel&quot;).val();el=$(&quot;#elabel&quot;).val();elabel=(el!=&quot;&quot;)?&quot;|&quot;+el:&quot;&quot;;var b=$(this).text().slice(c,a);$(this).html($(this).text().replace(b,&quot;[&quot;+b+&quot;|&quot;+element+elabel+&quot;]&quot;))}});});">refMarklet</a></p>

    </article>

    <form>
      <div>
        <h2>Example of node body text area</h2>
        <div id="edit-body">
          <label for="edit-body-und-0-value">Page content </label>
          <div class="form-textarea-wrapper">
            <textarea class="text-full form-textarea" id="edit-body-und-0-value" name="body[und][0][value]" cols="60" rows="20">
              Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus id ornare tortor, ut cursus sapien. Pellentesque sed cursus sapien. Integer auctor vestibulum eros, sit amet ultricies ante rutrum vitae. Pellentesque interdum, magna eu dignissim tempor, sem tortor fermentum lectus, at faucibus augue felis vel purus. Suspendisse fringilla iaculis ipsum ac condimentum. Proin vitae ex eleifend, interdum mi bibendum, pulvinar quam. Etiam imperdiet vestibulum malesuada. 

              Phasellus tellus ante, eleifend in pellentesque ut, blandit ac nisi. Cras fermentum aliquam mauris, ac molestie est faucibus eu. Donec ac porttitor erat. Suspendisse nec nisl ligula. Sed molestie dolor ante, in fermentum libero convallis id. Sed convallis elementum ex, id pretium velit mattis eu. Aenean ut egestas dolor. Aliquam erat volutpat.
            </textarea>
          </div>
        </div>
      </div>
    </form>
    <p>This should end up (reliant on drupal theme) looking something like this:</p>
    <p><img src="referencing_highlights.png" />
    </p></p>
  </body>
</html>